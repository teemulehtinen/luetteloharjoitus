(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(14),o=n.n(u),c=n(4),l=n(2),i=n(3),d=n.n(i),s=function(e){return"".concat("/api/persons","/").concat(e)},m=function(){return d.a.get("/api/persons").then((function(e){return e.data}))},f=function(e){return d.a.post("/api/persons",e).then((function(e){return e.data}))},b=function(e){return d.a.put(s(e.id),e).then((function(e){return e.data}))},p=function(e){return d.a.delete(s(e)).then((function(e){return e.data}))},v=function(e){var t=e.message;if(null===t)return null;var n=0,r={color:"green",padding:"0.5em",borderWidth:"thick",borderStyle:"solid",borderRadius:"0.3em",backgroundColor:"lightgrey",borderColor:"green"};return t.startsWith("Error: ")&&(n=7,r.color="red",r.borderColor="red"),a.a.createElement("div",{style:r},t.slice(n))},h=function(e){var t=e.value,n=e.setValue;return a.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}})},E=function(e){var t=e.value,n=e.setValue;return a.a.createElement("p",null,"filter shown with ",a.a.createElement(h,{value:t,setValue:n}))},O=function(e){var t=e.name,n=e.setName,r=e.number,u=e.setNumber,o=e.addPerson;return a.a.createElement("form",{onSubmit:o},a.a.createElement("div",null,"name: ",a.a.createElement(h,{value:t,setValue:n})),a.a.createElement("div",null,"number: ",a.a.createElement(h,{value:r,setValue:u})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.person,n=e.onDelete;return a.a.createElement("div",null,t.name," ",t.number," ",a.a.createElement("button",{onClick:n,value:t.id},"delete"))},j=function(e){var t=e.persons,n=e.onDelete;return a.a.createElement("div",null,t.map((function(e){return a.a.createElement(g,{key:e.name,person:e,onDelete:n})})))},w=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],u=t[1],o=Object(r.useState)([]),i=Object(l.a)(o,2),d=i[0],s=i[1],h=Object(r.useState)(""),g=Object(l.a)(h,2),w=g[0],k=g[1],S=Object(r.useState)(""),y=Object(l.a)(S,2),C=y[0],D=y[1],V=Object(r.useState)(""),N=Object(l.a)(V,2),P=N[0],x=N[1],F=function(e,t){u(e),setTimeout((function(){return u(null)}),1e3*(t||5))},J=function(e){400===e.status?F("Error: ".concat(e.data.error)):F("Error: Failed to connect server")};Object(r.useEffect)((function(){m().then((function(e){return s(e)})).catch((function(e){return F("Error: Failed to connect server")}))}),[]);var L=function(e){window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&b(Object(c.a)(Object(c.a)({},e),{},{number:P})).then((function(e){s(d.map((function(t){return t.id===e.id?e:t}))),F("Updated ".concat(e.name)),D(""),x("")})).catch((function(e){return J(e.response)}))},W=""===w?d:d.filter((function(e){return e.name.toLowerCase().indexOf(w.toLowerCase())>=0}));return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(v,{message:n}),a.a.createElement(E,{value:w,setValue:k}),a.a.createElement("h2",null,"add a new"),a.a.createElement(O,{name:C,setName:D,number:P,setNumber:x,addPerson:function(e){e.preventDefault();var t=d.find((function(e){return e.name===C}));void 0!==t?L(t):f({name:C,number:P}).then((function(e){s(d.concat(e)),F("Added ".concat(e.name)),D(""),x("")})).catch((function(e){return J(e.response)}))}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(j,{persons:W,onDelete:function(e){var t=e.target.value,n=d.find((function(e){return e.id===t}));window.confirm("Delete ".concat(n.name,"?"))&&p(n.id).then((function(){F("Deleted ".concat(n.name)),s(d.filter((function(e){return e.id!==n.id})))})).catch((function(e){return J(e.response)}))}}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.dcae8413.chunk.js.map